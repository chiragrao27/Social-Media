{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/91797/Desktop/react_project/Social Media/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/91797/Desktop/react_project/Social Media/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/91797/Desktop/react_project/Social Media/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ChatBubbleOutlineOutlined,FavoriteBorderOutlined,FavoriteOutlined,ShareOutlined}from\"@mui/icons-material\";import Box from\"@mui/material/Box\";import Typography from\"@mui/material/Typography\";import{Divider,IconButton,useTheme}from\"@mui/material\";import FlexBetween from\"components/FlexBetween\";import Friend from\"components/Friend\";import WidgetWrapper from\"components/WidgetWrapper\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setPost}from\"state\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostWidget=function PostWidget(_ref){var postId=_ref.postId,postUserId=_ref.postUserId,name=_ref.name,description=_ref.description,location=_ref.location,picturePath=_ref.picturePath,userPicturePath=_ref.userPicturePath,likes=_ref.likes,comments=_ref.comments;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isComment=_useState2[0],setIsComment=_useState2[1];var loggedInUserId=useSelector(function(state){return state.user._id;});var isLiked=Boolean(likes[loggedInUserId]);var likeCount=Object.keys(likes).length;var _useTheme=useTheme(),palette=_useTheme.palette;var dispatch=useDispatch();var token=useSelector(function(state){return state.token;});var primary=palette.primary.main;var main=palette.neutral.main;var patchLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,updatedPost;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:3001/post/\".concat(postId,\"/like\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({userId:loggedInUserId})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:updatedPost=_context.sent;dispatch(setPost({post:updatedPost}));window.location.reload(false);case 8:case\"end\":return _context.stop();}},_callee);}));return function patchLike(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(WidgetWrapper,{m:\"2rem 0\",children:[/*#__PURE__*/_jsx(Friend,{friendId:postUserId,name:name,subtitle:location,userPicturePath:userPicturePath}),/*#__PURE__*/_jsx(Typography,{color:main,sx:{mt:\"1rem\"},children:description}),picturePath&&/*#__PURE__*/_jsx(\"img\",{width:\"100%\",height:\"auto\",alt:\"post\",style:{borderRadius:\"0.75rem\",marginTop:\"0.7rem\"},src:\"http://localhost:3001/assets/\".concat(picturePath)}),/*#__PURE__*/_jsxs(FlexBetween,{mt:\"0.25rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"1rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:patchLike,children:isLiked?/*#__PURE__*/_jsx(FavoriteOutlined,{sx:{color:primary}}):/*#__PURE__*/_jsx(FavoriteBorderOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:likeCount})]}),/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setIsComment(!isComment);},children:/*#__PURE__*/_jsx(ChatBubbleOutlineOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:comments.length})]})]}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(ShareOutlined,{})})]}),isComment&&/*#__PURE__*/_jsxs(Box,{mt:\"0.5rem\",children:[comments.map(function(comment,i){return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{sx:{color:main,m:\"0.5rem 0\",pl:\"1rem\"},children:comment})]},\"\".concat(name,\"-\").concat(i));}),/*#__PURE__*/_jsx(Divider,{})]})]});};export default PostWidget;","map":{"version":3,"names":["ChatBubbleOutlineOutlined","FavoriteBorderOutlined","FavoriteOutlined","ShareOutlined","Box","Typography","Divider","IconButton","useTheme","FlexBetween","Friend","WidgetWrapper","useState","useDispatch","useSelector","setPost","jsx","_jsx","jsxs","_jsxs","PostWidget","_ref","postId","postUserId","name","description","location","picturePath","userPicturePath","likes","comments","_useState","_useState2","_slicedToArray","isComment","setIsComment","loggedInUserId","state","user","_id","isLiked","Boolean","likeCount","Object","keys","length","_useTheme","palette","dispatch","token","primary","main","neutral","patchLike","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","updatedPost","wrap","_callee$","_context","prev","next","fetch","concat","method","headers","Authorization","body","JSON","stringify","userId","sent","json","post","window","reload","stop","apply","arguments","m","children","friendId","subtitle","color","sx","mt","width","height","alt","style","borderRadius","marginTop","src","gap","onClick","map","comment","i","pl"],"sources":["C:/Users/91797/Desktop/react_project/Social Media/client/src/scenes/widgets/PostWidget.jsx"],"sourcesContent":["import { ChatBubbleOutlineOutlined,\r\n    FavoriteBorderOutlined,\r\n    FavoriteOutlined,\r\n    ShareOutlined\r\n} from \"@mui/icons-material\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport {\r\n    Divider,\r\n    IconButton,\r\n    useTheme\r\n} from \"@mui/material\";\r\nimport FlexBetween from \"components/FlexBetween\";\r\nimport Friend from \"components/Friend\";\r\nimport WidgetWrapper from \"components/WidgetWrapper\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch , useSelector } from \"react-redux\";\r\nimport { setPost } from \"state\";\r\n\r\nconst PostWidget = ({\r\n    postId,\r\n    postUserId,\r\n    name,   \r\n    description,\r\n    location,\r\n    picturePath,\r\n    userPicturePath,\r\n    likes,\r\n    comments,\r\n}) => {\r\n\r\n    const [isComment, setIsComment] = useState(false);\r\n    const loggedInUserId = useSelector((state) => state.user._id);\r\n    const isLiked = Boolean(likes[loggedInUserId]);\r\n    const likeCount = Object.keys(likes).length;\r\n\r\n    const {palette} = useTheme();\r\n    const dispatch = useDispatch();\r\n    \r\n    \r\n    const token = useSelector((state) => state.token);\r\n\r\n    const primary = palette.primary.main;\r\n    const main = palette.neutral.main;\r\n\r\n    const patchLike = async () => {\r\n\r\n        const response = await fetch(\r\n            `http://localhost:3001/post/${postId}/like`, {\r\n                method : \"PATCH\",\r\n                headers : {\r\n                    \"Content-Type\" : \"application/json\",\r\n                    Authorization : `Bearer ${token}`\r\n                },\r\n                body : JSON.stringify({ userId : loggedInUserId})\r\n            });\r\n            const updatedPost = await response.json();\r\n            dispatch(setPost({ post : updatedPost}));\r\n            window.location.reload(false);\r\n\r\n    };\r\n\r\n    return(\r\n        <WidgetWrapper m=\"2rem 0\">\r\n            <Friend\r\n            friendId={postUserId}\r\n            name = {name}\r\n            subtitle={location}\r\n            userPicturePath={userPicturePath}\r\n            />\r\n            <Typography color={main} sx={{\r\n                mt:\"1rem\"\r\n            }}>\r\n                {description}\r\n            </Typography>\r\n            {picturePath && (\r\n                <img \r\n                width=\"100%\"\r\n                height=\"auto\"\r\n                alt=\"post\"\r\n                style={{ borderRadius : \"0.75rem\" , marginTop : \"0.7rem\"}}\r\n                src={`http://localhost:3001/assets/${picturePath}`}\r\n                />\r\n            )}\r\n            <FlexBetween mt=\"0.25rem\">\r\n                <FlexBetween gap=\"1rem\">\r\n                    <FlexBetween gap=\"0.3rem\">\r\n                        <IconButton onClick={patchLike}>\r\n                        {isLiked ? (\r\n                            <FavoriteOutlined sx={{color : primary}}/>\r\n                        ) : (<FavoriteBorderOutlined/>)}\r\n                        </IconButton>\r\n                        <Typography>\r\n                            {likeCount}\r\n                        </Typography>\r\n                    </FlexBetween>\r\n\r\n                    <FlexBetween gap=\"0.3rem\">\r\n                    <IconButton onClick={() => setIsComment(!isComment)}>\r\n                            <ChatBubbleOutlineOutlined/>\r\n                        </IconButton>\r\n                        <Typography>\r\n                            {comments.length}\r\n                        </Typography>\r\n                    </FlexBetween>\r\n                </FlexBetween>\r\n\r\n                <IconButton>\r\n                    <ShareOutlined/>\r\n                </IconButton>\r\n\r\n            </FlexBetween>\r\n            {isComment  &&  (\r\n                <Box mt=\"0.5rem\">\r\n                    {comments.map((comment,i)=>(\r\n                        <Box key={`${name}-${i}`}>\r\n                            <Divider />\r\n                            <Typography\r\n                            sx={{ color: main, m:\"0.5rem 0\",\r\n                            pl:\"1rem\"}}\r\n                            >\r\n                                {comment}\r\n                            </Typography>\r\n                        </Box>\r\n                    ))}\r\n                    <Divider />\r\n                </Box>\r\n            )}\r\n        </WidgetWrapper>\r\n    )\r\n    \r\n\r\n}\r\n\r\nexport default PostWidget;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}